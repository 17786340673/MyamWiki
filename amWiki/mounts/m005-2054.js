if(typeof AWPageMounts=='undefined'){AWPageMounts={}};AWPageMounts['m005']=[{"name":"01-Flink内置函数.md","path":"005-Flink/01-Flink内置函数.md","content":"# Flink内置函数\r\n>维护人员：**高俊**  \r\n>创建时间：2020-12-21\r\n\r\n<font color=#C71585>【目录结构】</font>   \r\n\r\n>1. [时间函数](#时间函数 \"时间函数\")\r\n\r\n## 时间函数   \r\n| 函数 | 返回类型  | 说明 |\r\n| :-- | :--: | :-- |\r\n| **CURRENT_DATE** | date | 返回当前UTC时间，UTC时间比东八区北京时间慢8个小时；|  \r\n| **TO_DATE(CAST(LOCALTIMESTAMP AS VARCHAR))** | date | 返回当前本地时区日期；|   \r\n| **LOCALTIMESTAMP** | timestamp | 返回本地时区的时间戳；|  \r\n\r\n## 数值函数   \r\n**decimal(a,b)**：其中a不得小于b\r\n","timestamp":1649734317474},{"name":"02-Flink开发问题.md","path":"005-Flink/02-Flink开发问题.md","content":"# Flink开发问题  \r\n>维护人员：**高俊**  \r\n>创建时间：2020-12-21   \r\n>更新时间：2020-12-22\r\n\r\n<font color=#C71585>【目录结构】</font>   \r\n\r\n>1. [技术问题](#技术问题 \"技术问题\")\r\n  1. [问题一：Mysql的server-id](#问题一：Mysql的server-id \"问题一：Mysql的server-id\")\r\n  1. [问题二：mysql的时区差问题](#问题二：mysql的时区差问题 \"问题二：mysql的时区差问题\")\r\n2. [业务问题](#业务问题 \"业务问题\")\r\n\r\n## 技术问题\r\n### 问题一：Mysql的server-id\r\n    问题描述：Flink启动任务，当多个任务带着相同的server_id同时请求Mysql一张表的binlog日志，会报如下错误：\r\n      A slave with the same server_uuid/server_id as this slave has connected to the master; the first event \'mysql-bin.000014\' at 623052405, the last event read from \'./mysql-bin.000014\' at 623537983, the last byte read from \'./mysql-bin.000014\' at 623537983. Error code: 1236; SQLSTATE: HY000\r\n\r\n    解决方式一：  \r\n      1. 写脚本获取每个flink任务启动的JOBID  \r\n      2. 因为每个sql-clint是一个独立的空间，将每个dwd程序单独拆成对应的主题程序任务，每个主题程序任务都会有对应的JOBID，方便任务的管理   \r\n      3. 分开启动任务，避开启动任务是向同一源头表的binlog发起请求，报上述错误     \r\n      4. 增加重启策略参数，当报如上错误时，可以自动间隔重启（暂定100秒）   \r\n\r\n    解决方式二：      \r\n      1. 设置动态表参数：SET table.dynamic-table-options.enable=true;\r\n      2. 任务中每个表后面增加 /*+ OPTIONS(\'server_id\'=\'100000\') */    \r\n\r\n### 问题二：mysql的时区差问题\r\n    问题描述：数据从flink写入mysql，在时间字段上存在时区差     \r\n    原因分析：数据传输存在时区差  \r\n    解决方式：建立映射表时，设置相同时区：\'server-time-zone\'=\'Asia/Shanghai\'  \r\n\r\n### 问题三：\r\n\r\n## 业务问题\r\n","timestamp":1649734317474}]